<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product">

    <!-- ALL -->
    <select id="all" resultType="productVO">
        SELECT *
        FROM product
    </select>

    <!-- 오늘 등록 된 상품 Read -->
    <select id="listProductToday" resultType="productVO">
        SELECT *
        FROM product WHERE DATE(saved_time) = CURDATE();
    </select>

    <!-- Product ID로 상품 정보 Read -->
    <select id="productOneById" parameterType="int" resultType="productVO">
        SELECT *
        FROM product
        WHERE product_id = #{productId}
    </select>

    <!-- 검색 기능 -->
    <select id="oneWhere" parameterType="java.util.Map" resultType="productVO">
        SELECT *
        FROM product
        WHERE ${searchType} = #{searchIndex}
    </select>

    <!-- Order의 order_id로 해당 주문의 판매상품 가격 Read -->
    <select id="priceByOrderNo" parameterType="int" resultType="int">
        SELECT price
        FROM tb_order o JOIN product p ON o.product_id = p.product_id
        WHERE p.product_id = #{productId};
    </select>

</mapper>